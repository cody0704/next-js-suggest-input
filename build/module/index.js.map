{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/index.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {Tag} from \"./components/Tag\";\r\nimport {classSelectors} from \"./utils/selectors\";\r\n\r\ntype Tags = string[];\r\n\r\nexport interface NextTagInputProps {\r\n  tags: Tags;\r\n  onChange: (tags: Tags) => void;\r\n  placeholder?: string;\r\n  maxTags?: number;\r\n  validator?: (val: string) => boolean;\r\n  editable?: boolean;\r\n  readOnly?: boolean;\r\n  removeOnBackspace?: boolean;\r\n  suggestions?: any\r\n}\r\n\r\ninterface State {\r\n  input: string;\r\n  suggestions: any;\r\n}\r\n\r\nexport default class NextTagInput extends React.Component<NextTagInputProps, State> {\r\n\r\n  state = { input: \"\", suggestions: \"\" };\r\n\r\n  // Ref for input element\r\n  inputRef: React.RefObject<HTMLInputElement> = React.createRef();\r\n\r\n  onInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    this.setState({ input: e.target.value });\r\n  }\r\n\r\n  onInputKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n\r\n    const { input } = this.state;\r\n    const { validator, removeOnBackspace, suggestions } = this.props;\r\n\r\n    var value = input.toLowerCase();\r\n        value = value.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\r\n    var queryRegExp = new RegExp('^' + value, 'i');\r\n\r\n    const suggest = suggestions.filter(function(item:any) { return queryRegExp.test(item); })\r\n    \r\n    if(value.length > 0) this.setState({ suggestions: suggest.toString() });\r\n    // console.log(suggest)\r\n    // On enter\r\n    if (e.keyCode === 13 || e.keyCode === 188) {\r\n\r\n      // Prevent form submission if tag input is nested in <form>\r\n      e.preventDefault();\r\n\r\n      // If input is blank, do nothing\r\n      if (input === \"\") {this.setState({ suggestions: \"\" }); return; }\r\n\r\n      // Check if input is valid\r\n      const valid = validator !== undefined ? validator(input) : true;\r\n      if (!valid) {\r\n        return;\r\n      }\r\n\r\n      // Add input to tag list\r\n      this.addTag(input);\r\n\r\n    }\r\n    // On backspace or delete\r\n    else if (removeOnBackspace && (e.keyCode === 8 || e.keyCode === 46)) {\r\n\r\n      // If currently typing, do nothing\r\n      if (input !== \"\") {\r\n        return;\r\n      }\r\n\r\n      // If input is blank, remove previous tag\r\n      this.removeTag(this.props.tags.length - 1);\r\n\r\n    }\r\n\r\n  }\r\n\r\n  addTag = (value: string) => {\r\n    const tags = [ ...this.props.tags ];\r\n    tags.push(value);\r\n    this.props.onChange(tags);\r\n    this.setState({ input: \"\", suggestions: \"\" });\r\n  }\r\n\r\n  removeTag = (i: number) => {\r\n    const tags = [ ...this.props.tags ];\r\n    tags.splice(i, 1);\r\n    this.props.onChange(tags);\r\n    this.setState({ suggestions: \"\" });\r\n  }\r\n\r\n  updateTag = (i: number, value: string) => {\r\n    const tags = [...this.props.tags];\r\n    tags[i] = value;\r\n    this.props.onChange(tags);\r\n  }\r\n\r\n  render() {\r\n\r\n    const { input } = this.state;\r\n\r\n    const { tags, placeholder, maxTags, editable, readOnly, validator, removeOnBackspace } = this.props;\r\n\r\n    const maxTagsReached = maxTags !== undefined ? tags.length >= maxTags : false;\r\n\r\n    const isEditable = readOnly ? false : (editable || false);\r\n\r\n    const showInput = !readOnly && !maxTagsReached;\r\n\r\n    return (\r\n      <div className={classSelectors.wrapper}>\r\n        {tags.map((tag, i) => (\r\n          <Tag\r\n            key={i}\r\n            value={tag}\r\n            index={i}\r\n            editable={isEditable}\r\n            readOnly={readOnly || false}\r\n            inputRef={this.inputRef}\r\n            update={this.updateTag}\r\n            remove={this.removeTag}\r\n            validator={validator}\r\n            removeOnBackspace={removeOnBackspace}\r\n          />\r\n        ))}\r\n        {showInput &&\r\n          <input\r\n            ref={this.inputRef}\r\n            value={input}\r\n            className={classSelectors.input}\r\n            placeholder={placeholder || \"Type and press enter\"}\r\n            onChange={this.onInputChange}\r\n            onKeyDown={this.onInputKeyDown}\r\n          />\r\n        }\r\n        <div id=\"complete\">{this.state.suggestions ? this.state.suggestions : ''}</div>\r\n      </div>\r\n    );\r\n\r\n  }\r\n\r\n}\r\n"]}